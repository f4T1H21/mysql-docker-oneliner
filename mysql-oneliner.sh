#!/usr/bin/bash
# Written by Åžefik Efe, see https://github.com/f4T1H21/mysql-docker-oneliner for more details.
sudo docker images | grep 'mysql.*latest' 1>/dev/null || echo -e '\n\033[1;91m[!] \033[1;97mBecause the "mysql:latest" Docker image could not be found, it has pulled.\033[0m\n'"$(sudo docker pull mysql)"'' && echo -e '\n\033[1;92m[+] \033[1;97mCreating and connecting to MySQL server as root through Docker container...\033[0m\n' && sudo docker run -it --rm mysql mysql -h$(jq -r '.[].Containers."'"$(sudo docker run --rm -e MYSQL_ROOT_PASSWORD=1234 -d mysql && sleep 11)"'".IPv4Address' <<< $(sudo docker network inspect bridge) | cut -f1 -d "/") -uroot -p1234; echo -e "\n\033[1;92m[+] \033[1;97mKilled MySQL server and removed related Docker container with ID:\n\033[1;96m$(sudo docker container kill $(sudo docker container list --no-trunc | grep 'mysql\|docker-entrypoint.sh mysqld\|3306/tcp' | awk '{print $1}'))\033[0m\n"
